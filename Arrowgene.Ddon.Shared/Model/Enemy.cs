using Arrowgene.Ddon.Shared.Entity.Structure;
using System.Collections.Generic;

namespace Arrowgene.Ddon.Shared.Model
{
    public class Enemy
    {       
        public Enemy()
        {
            NamedEnemyParams = NamedParam.DEFAULT_NAMED_PARAM;
            DropsTable = new DropsTable();
        }

        public Enemy(Enemy enemy)
        {
            Id = enemy.Id;
            EnemyId = enemy.EnemyId;
            NamedEnemyParams = enemy.NamedEnemyParams;
            RaidBossId = enemy.RaidBossId;
            Scale = enemy.Scale;
            Lv = enemy.Lv;
            HmPresetNo = enemy.HmPresetNo;
            StartThinkTblNo = enemy.StartThinkTblNo;
            RepopNum = enemy.RepopNum;
            RepopCount = enemy.RepopCount;
            EnemyTargetTypesId = enemy.EnemyTargetTypesId;
            MontageFixNo = enemy.MontageFixNo;
            SetType = enemy.SetType;
            InfectionType = enemy.InfectionType;
            IsBossGauge = enemy.IsBossGauge;
            IsBossBGM = enemy.IsBossBGM;
            IsManualSet = enemy.IsManualSet;
            IsAreaBoss = enemy.IsAreaBoss;
            BloodOrbs = enemy.BloodOrbs;
            HighOrbs = enemy.HighOrbs;
            SpawnTimeStart = enemy.SpawnTimeStart;
            SpawnTimeEnd = enemy.SpawnTimeEnd;
            Experience = enemy.Experience;
            DropsTable = enemy.DropsTable;
            Subgroup = enemy.Subgroup;
            PPDrop = enemy.PPDrop;
            IsBloodOrbEnemy = enemy.IsBloodOrbEnemy;
            IsHighOrbEnemy = enemy.IsHighOrbEnemy;
        }

        public uint Id { get; set; }

        public uint EnemyId { get; set; }
        public NamedParam NamedEnemyParams { get; set; }
        public uint RaidBossId { get; set; }
        public ushort Scale { get; set; } // Scale as a percentage, 100(%) is normal
        public ushort Lv { get; set; } // Level
        public ushort HmPresetNo { get; set; }
        public byte StartThinkTblNo { get; set; } // Start Think Table Number???
        public byte RepopNum { get; set; }
        public byte RepopCount { get; set; }
        public byte EnemyTargetTypesId { get; set; }
        public byte MontageFixNo { get; set; }
        public byte SetType { get; set; }
        public byte InfectionType { get; set; }
        public bool IsBossGauge { get; set; }
        public bool IsBossBGM { get; set; }
        public bool IsManualSet { get; set; }
        public bool IsAreaBoss { get; set; }
        public uint BloodOrbs { get; set; }
        public bool IsBloodOrbEnemy { get; set; }
        public uint HighOrbs { get; set; }
        public bool IsHighOrbEnemy { get; set; }
        public long SpawnTimeStart { get; set;}
        public long SpawnTimeEnd { get; set; }
        public uint Experience { get; set; }
        public uint RaidPoints { get; set; }
        public DropsTable DropsTable { get; set; }
        public uint PPDrop { get; set; }
        public uint UINameId { get 
            {
                return NameMap.GetValueOrDefault(EnemyId);
            } 
        }
        public byte Subgroup { get; set; }

        public uint GetDroppedExperience()
        {
            return Experience * (NamedEnemyParams.Experience / 100);
        }

        public uint GetDroppedPlayPoints()
        {
            return PPDrop;
        }

        public CDataStageLayoutEnemyPresetEnemyInfoClient AsCDataStageLayoutEnemyPresetEnemyInfoClient()
        {
            return new CDataStageLayoutEnemyPresetEnemyInfoClient()
            {
                EnemyId = EnemyId,
                NamedEnemyParamsId = NamedEnemyParams.Id,
                RaidBossId = RaidBossId,
                Scale = Scale,
                Lv = Lv,
                HmPresetNo = HmPresetNo,
                StartThinkTblNo = StartThinkTblNo,
                RepopNum = RepopNum,
                RepopCount = RepopCount,
                EnemyTargetTypesId = EnemyTargetTypesId,
                MontageFixNo = MontageFixNo,
                SetType = SetType,
                InfectionType = InfectionType,
                IsBossGauge = IsBossGauge,
                IsBossBGM = IsBossBGM,
                IsManualSet = IsManualSet,
                IsAreaBoss = IsAreaBoss,
                IsBloodEnemy = IsBloodOrbEnemy,
                IsHighOrbEnemy = IsHighOrbEnemy,
            };
        }

        /// <summary>
        /// Uses the EnemyId enum to find a name for the UI.
        /// </summary>
        /// <param name="enemyId"></param>
        /// <returns></returns>
        public static uint GetNameId(EnemyId enemyId)
        {
            if (!NameMap.ContainsKey((uint) enemyId))
            {
                return 0;
            }
            return NameMap[(uint)enemyId];
        }

        /// <summary>
        /// Maps enemyId to the index used by the UI to fetch the enemy's name. 
        /// </summary>
        public static readonly Dictionary<uint, uint> NameMap = new Dictionary<uint, uint>()
        {
            { 0x000000 , 0 },
            { 0x010100 , 1 },
            { 0x010101 , 2 },
            { 0x010102 , 3 },
            { 0x010103 , 4 },
            { 0x010104 , 5 },
            { 0x010105 , 4 },
            { 0x010110 , 6 },
            { 0x010111 , 7 },
            { 0x010112 , 8 },
            { 0x010113 , 9 },
            { 0x010114 , 8 },
            { 0x010120 , 314 },
            { 0x010121 , 315 },
            { 0x010123 , 316 },
            { 0x010124 , 369 },
            { 0x010130 , 317 },
            { 0x010131 , 317 },
            { 0x010140 , 318 },
            { 0x010141 , 319 },
            { 0x010150 , 292 },
            { 0x010151 , 288 },
            { 0x010152 , 289 },
            { 0x010153 , 290 },
            { 0x010155 , 181 },
            { 0x010160 , 182 },
            { 0x010161 , 278 },
            { 0x010162 , 279 },
            { 0x010170 , 291 },
            { 0x010171 , 291 },
            { 0x010172 , 291 },
            { 0x010180 , 1 },
            { 0x010190 , 294 },
            { 0x010191 , 295 },
            { 0x010192 , 296 },
            { 0x010195 , 297 },
            { 0x010200 , 32 },
            { 0x010201 , 31 },
            { 0x010202 , 320 },
            { 0x010203 , 184 },
            { 0x010205 , 30 },
            { 0x010206 , 29 },
            { 0x010207 , 28 },
            { 0x010208 , 180 },
            { 0x010209 , 185 },
            { 0x010210 , 186 },
            { 0x010211 , 187 },
            { 0x010212 , 321 },
            { 0x010220 , 188 },
            { 0x010221 , 322 },
            { 0x010230 , 323 },
            { 0x010240 , 409 },
            { 0x010300 , 40 },
            { 0x010301 , 39 },
            { 0x010302 , 38 },
            { 0x010303 , 324 },
            { 0x010306 , 154 },
            { 0x010307 , 189 },
            { 0x010308 , 37 },
            { 0x010309 , 36 },
            { 0x010310 , 35 },
            { 0x010311 , 34 },
            { 0x010312 , 33 },
            { 0x010313 , 115 },
            { 0x010314 , 190 },
            { 0x010315 , 191 },
            { 0x010316 , 192 },
            { 0x010317 , 193 },
            { 0x010318 , 194 },
            { 0x010320 , 195 },
            { 0x010321 , 196 },
            { 0x010322 , 197 },
            { 0x010323 , 198 },
            { 0x010324 , 199 },
            { 0x010400 , 46 },
            { 0x010401 , 45 },
            { 0x010410 , 44 },
            { 0x010411 , 43 },
            { 0x010420 , 325 },
            { 0x010421 , 326 },
            { 0x010430 , 277 },
            { 0x010431 , 308 },
            { 0x010440 , 371 },
            { 0x010450 , 42 },
            { 0x010451 , 171 },
            { 0x010460 , 41 },
            { 0x010461 , 200 },
            { 0x010470 , 327 },
            { 0x010471 , 328 },
            { 0x010480 , 401 },
            { 0x010482 , 402 },
            { 0x010500 , 54 },
            { 0x010501 , 54 },
            { 0x010502 , 53 },
            { 0x010503 , 52 },
            { 0x010504 , 51 },
            { 0x010508 , 202 },
            { 0x010509 , 50 },
            { 0x010510 , 49 },
            { 0x010511 , 48 },
            { 0x010512 , 47 },
            { 0x010513 , 203 },
            { 0x010514 , 204 },
            { 0x010515 , 205 },
            { 0x010516 , 206 },
            { 0x010517 , 207 },
            { 0x010518 , 208 },
            { 0x010519 , 209 },
            { 0x010520 , 210 },
            { 0x010530 , 312 },
            { 0x010600 , 58 },
            { 0x010601 , 57 },
            { 0x010603 , 211 },
            { 0x010605 , 212 },
            { 0x010606 , 56 },
            { 0x010607 , 55 },
            { 0x010608 , 329 },
            { 0x010610 , 214 },
            { 0x010611 , 213 },
            { 0x010612 , 215 },
            { 0x010614 , 216 },
            { 0x010621 , 405 },
            { 0x010800 , 69 },
            { 0x010810 , 68 },
            { 0x010820 , 217 },
            { 0x010821 , 217 },
            { 0x010822 , 217 },
            { 0x010823 , 217 },
            { 0x010900 , 16 },
            { 0x010901 , 17 },
            { 0x010902 , 20 },
            { 0x010903 , 19 },
            { 0x010904 , 219 },
            { 0x010905 , 220 },
            { 0x010906 , 221 },
            { 0x010907 , 222 },
            { 0x010908 , 223 },
            { 0x010909 , 224 },
            { 0x010910 , 18 },
            { 0x010911 , 299 },
            { 0x010915 , 331 },
            { 0x010920 , 300 },
            { 0x011000 , 67 },
            { 0x011001 , 136 },
            { 0x011002 , 137 },
            { 0x011003 , 138 },
            { 0x011004 , 139 },
            { 0x011005 , 140 },
            { 0x011006 , 141 },
            { 0x011010 , 66 },
            { 0x011011 , 142 },
            { 0x011012 , 143 },
            { 0x011013 , 144 },
            { 0x011014 , 145 },
            { 0x011015 , 146 },
            { 0x011016 , 147 },
            { 0x011020 , 175 },
            { 0x011021 , 65 },
            { 0x011022 , 148 },
            { 0x011023 , 149 },
            { 0x011024 , 150 },
            { 0x011025 , 151 },
            { 0x011026 , 152 },
            { 0x011027 , 153 },
            { 0x011030 , 64 },
            { 0x011031 , 63 },
            { 0x011032 , 62 },
            { 0x011033 , 61 },
            { 0x011034 , 60 },
            { 0x011040 , 117 },
            { 0x011041 , 105 },
            { 0x011042 , 118 },
            { 0x011043 , 73 },
            { 0x011044 , 411 },
            { 0x011050 , 119 },
            { 0x011051 , 120 },
            { 0x011052 , 121 },
            { 0x011053 , 122 },
            { 0x011054 , 123 },
            { 0x011055 , 124 },
            { 0x011056 , 125 },
            { 0x011057 , 126 },
            { 0x011060 , 225 },
            { 0x011061 , 226 },
            { 0x011062 , 227 },
            { 0x011063 , 228 },
            { 0x011064 , 229 },
            { 0x011065 , 231 },
            { 0x011066 , 230 },
            { 0x011067 , 232 },
            { 0x011068 , 0 },
            { 0x011069 , 0 },
            { 0x011070 , 301 },
            { 0x011071 , 302 },
            { 0x011072 , 303 },
            { 0x011073 , 304 },
            { 0x011074 , 305 },
            { 0x011075 , 306 },
            { 0x011076 , 307 },
            { 0x011080 , 386 },
            { 0x011081 , 386 },
            { 0x011082 , 386 },
            { 0x011083 , 386 },
            { 0x011100 , 128 },
            { 0x011101 , 129 },
            { 0x011102 , 130 },
            { 0x011110 , 131 },
            { 0x011111 , 132 },
            { 0x011112 , 133 },
            { 0x011120 , 134 },
            { 0x011121 , 116 },
            { 0x011122 , 169 },
            { 0x011123 , 168 },
            { 0x011124 , 167 },
            { 0x011125 , 166 },
            { 0x011130 , 165 },
            { 0x011131 , 164 },
            { 0x011132 , 163 },
            { 0x011140 , 162 },
            { 0x011150 , 161 },
            { 0x011160 , 160 },
            { 0x011170 , 332 },
            { 0x011171 , 332 },
            { 0x011172 , 332 },
            { 0x011173 , 380 },
            { 0x011200 , 159 },
            { 0x011201 , 396 },
            { 0x011210 , 235 },
            { 0x011211 , 235 },
            { 0x011300 , 237 },
            { 0x011301 , 237 },
            { 0x011302 , 333 },
            { 0x011400 , 249 },
            { 0x011401 , 249 },
            { 0x011410 , 283 },
            { 0x011411 , 283 },
            { 0x011412 , 283 },
            { 0x011413 , 283 },
            { 0x011500 , 201 },
            { 0x015000 , 70 },
            { 0x015001 , 70 },
            { 0x015002 , 76 },
            { 0x015003 , 76 },
            { 0x015004 , 70 },
            { 0x015010 , 239 },
            { 0x015012 , 240 },
            { 0x015017 , 241 },
            { 0x015020 , 75 },
            { 0x015030 , 74 },
            { 0x015031 , 73 },
            { 0x015032 , 280 },
            { 0x015033 , 335 },
            { 0x015040 , 72 },
            { 0x015041 , 71 },
            { 0x015042 , 336 },
            { 0x015050 , 337 },
            { 0x015051 , 337 },
            { 0x015052 , 397 },
            { 0x015053 , 404 },
            { 0x015054 , 408 },
            { 0x015060 , 338 },
            { 0x015061 , 338 },
            { 0x015100 , 83 },
            { 0x015102 , 82 },
            { 0x015103 , 81 },
            { 0x015104 , 80 },
            { 0x015105 , 0 },
            { 0x015200 , 79 },
            { 0x015201 , 244 },
            { 0x015202 , 78 },
            { 0x015203 , 77 },
            { 0x015204 , 339 },
            { 0x015210 , 242 },
            { 0x015211 , 340 },
            { 0x015220 , 341 },
            { 0x015230 , 394 },
            { 0x015300 , 84 },
            { 0x015301 , 85 },
            { 0x015302 , 89 },
            { 0x015303 , 88 },
            { 0x015304 , 87 },
            { 0x015305 , 86 },
            { 0x015306 , 246 },
            { 0x015310 , 245 },
            { 0x015320 , 281 },
            { 0x015321 , 282 },
            { 0x015330 , 342 },
            { 0x015400 , 248 },
            { 0x015401 , 247 },
            { 0x015406 , 381 },
            { 0x015410 , 94 },
            { 0x015411 , 93 },
            { 0x015412 , 92 },
            { 0x015413 , 91 },
            { 0x015420 , 90 },
            { 0x015500 , 98 },
            { 0x015502 , 97 },
            { 0x015503 , 96 },
            { 0x015504 , 95 },
            { 0x015505 , 170 },
            { 0x015506 , 250 },
            { 0x015507 , 309 },
            { 0x015508 , 344 },
            { 0x015509 , 345 },
            { 0x015510 , 346 },
            { 0x015600 , 101 },
            { 0x015603 , 392 },
            { 0x015604 , 100 },
            { 0x015605 , 99 },
            { 0x015610 , 251 },
            { 0x015611 , 407 },
            { 0x015620 , 252 },
            { 0x015621 , 347 },
            { 0x015622 , 348 },
            { 0x015623 , 413 },
            { 0x015700 , 27 },
            { 0x015701 , 26 },
            { 0x015706 , 253 },
            { 0x015707 , 25 },
            { 0x015708 , 24 },
            { 0x015709 , 23 },
            { 0x015710 , 22 },
            { 0x015711 , 21 },
            { 0x015712 , 254 },
            { 0x015717 , 255 },
            { 0x015718 , 349 },
            { 0x015719 , 403 },
            { 0x015720 , 258 },
            { 0x015721 , 286 },
            { 0x015723 , 350 },
            { 0x015730 , 351 },
            { 0x015740 , 23 },
            { 0x015800 , 15 },
            { 0x015801 , 155 },
            { 0x015802 , 156 },
            { 0x015810 , 14 },
            { 0x015811 , 157 },
            { 0x015812 , 158 },
            { 0x015813 , 257 },
            { 0x015814 , 284 },
            { 0x015815 , 285 },
            { 0x015820 , 13 },
            { 0x015821 , 352 },
            { 0x015822 , 366 },
            { 0x015823 , 367 },
            { 0x015824 , 368 },
            { 0x015825 , 391 },
            { 0x015826 , 353 },
            { 0x015830 , 12 },
            { 0x015831 , 354 },
            { 0x015832 , 354 },
            { 0x015833 , 354 },
            { 0x015835 , 398 },
            { 0x015836 , 398 },
            { 0x015837 , 398 },
            { 0x015838 , 399 },
            { 0x015839 , 355 },
            { 0x015840 , 11 },
            { 0x015850 , 10 },
            { 0x015851 , 259 },
            { 0x015852 , 412 },
            { 0x015860 , 356 },
            { 0x015861 , 357 },
            { 0x015862 , 358 },
            { 0x015863 , 359 },
            { 0x015870 , 360 },
            { 0x015900 , 260 },
            { 0x015910 , 261 },
            { 0x015920 , 287 },
            { 0x015921 , 421 },
            { 0x015930 , 361 },
            { 0x015932 , 400 },
            { 0x018000 , 114 },
            { 0x018100 , 0 },
            { 0x018200 , 113 },
            { 0x018201 , 112 },
            { 0x018300 , 111 },
            { 0x018401 , 110 },
            { 0x018600 , 109 },
            { 0x018601 , 108 },
            { 0x018602 , 172 },
            { 0x018603 , 108 },
            { 0x018604 , 172 },
            { 0x018700 , 0 },
            { 0x018800 , 107 },
            { 0x019000 , 264 },
            { 0x019001 , 264 },
            { 0x019100 , 266 },
            { 0x019200 , 267 },
            { 0x019201 , 267 },
            { 0x019300 , 269 },
            { 0x019301 , 269 },
            { 0x020402 , 106 },
            { 0x020403 , 271 },
            { 0x020404 , 373 },
            { 0x020500 , 105 },
            { 0x020601 , 272 },
            { 0x020602 , 362 },
            { 0x020606 , 372 },
            { 0x020700 , 274 },
            { 0x020701 , 274 },
            { 0x020702 , 274 },
            { 0x020803 , 363 },
            { 0x020804 , 363 },
            { 0x021000 , 104 },
            { 0x021001 , 103 },
            { 0x021002 , 102 },
            { 0x021003 , 104 },
            { 0x021004 , 364 },
            { 0x022000 , 276 },
            { 0x022001 , 276 },
            { 0x023000 , 365 },
            { 0x024000 , 410 },
            { 0x024001 , 410 },
            { 0x024002 , 410 },
            { 0x030100 , 174 },
            { 0x030101 , 173 },
            { 0x030104 , 310 },
            { 0x030105 , 311 },
            { 0x030106 , 0 },
            { 0x030107 , 420 },
            { 0x030108 , 0 },
            { 0x030109 , 0 },
            { 0x030110 , 0 },
            { 0x030111 , 0 },
            { 0x030112 , 418 },
            { 0x030113 , 418 },
            { 0x030114 , 419 },
            { 0x030115 , 418 },
            { 0x030116 , 424 },
            { 0x030117 , 427 },
            { 0x030118 , 426 },
            { 0x070041 , 75 },
            { 0x070042 , 75 },
            { 0x070050 , 239 },
            { 0x070051 , 239 },
            { 0x070200 , 96 },
            { 0x070210 , 250 },
            { 0x070211 , 250 },
            { 0x070410 , 71 },
            { 0x070510 , 74 },
            { 0x070520 , 280 },
            { 0x070600 , 84 },
            { 0x070610 , 88 },
            { 0x070620 , 281 },
            { 0x070640 , 282 },
            { 0x070641 , 282 },
            { 0x070700 , 89 },
            { 0x070800 , 79 },
            { 0x070810 , 78 },
            { 0x070820 , 244 },
            { 0x070830 , 242 },
            { 0x070900 , 27 },
            { 0x070910 , 26 },
            { 0x070920 , 24 },
            { 0x070930 , 23 },
            { 0x070940 , 25 },
            { 0x070950 , 258 },
            { 0x071100 , 103 },
            { 0x071101 , 410 },
            { 0x071102 , 410 },
            { 0x071250 , 359 },
            { 0x071251 , 356 },
            { 0x071252 , 357 },
            { 0x071300 , 106 },
            { 0x071310 , 272 },
            { 0x071311 , 362 },
            { 0x071400 , 0 },
            { 0x075120 , 37 },
            { 0x075121 , 37 },
            { 0x075130 , 36 },
            { 0x075131 , 36 },
            { 0x075300 , 36 },
            { 0x075400 , 365 },
            { 0x075401 , 365 },
            { 0x075700 , 101 },
            { 0x077000 , 0 },
            { 0x079000 , 0 },
            { 0x080000 , 103 },
            { 0x080100 , 102 },
            { 0x080200 , 74 },
            { 0x080300 , 106 },
            { 0x080400 , 276 },
            { 0x080500 , 313 },
            { 0x080501 , 274 },
            { 0x080502 , 274 },
            { 0x080503 , 313 },
            { 0x080504 , 406 },
            { 0x080505 , 426 },
            { 0x080600 , 286 },
            { 0x080700 , 248 },
            { 0x080800 , 394 },
            { 0x080801 , 396 },
            { 0x080802 , 0 },
            { 0x080900 , 362 },
            { 0x080901 , 362 },
            { 0x081000 , 410 },
            { 0x081001 , 410 },
            { 0x081002 , 410 },
            { 0x081003 , 410 },
            { 0x081004 , 424 },
            { 0x081005 , 424 },
            { 0x081006 , 424 },
            { 0x081007 , 424 },
            { 0x085000 , 15 },
            { 0x085001 , 15 },
            { 0x085002 , 15 },
            { 0x085003 , 15 },
            { 0x085004 , 13 },
            { 0x085009 , 0 },
            { 0x085010 , 2 },
            { 0x085011 , 2 },
            { 0x085012 , 2 },
            { 0x085013 , 2 },
            { 0x085014 , 2 },
            { 0x085015 , 2 },
            { 0x085016 , 2 },
            { 0x085017 , 2 },
            { 0x085018 , 2 },
            { 0x085019 , 2 },
            { 0x085110 , 70 },
            { 0x085111 , 70 },
            { 0x085112 , 70 },
            { 0x085113 , 70 },
            { 0x085114 , 70 },
            { 0x095801 , 414 },
            { 0x095802 , 415 },
            { 0x095803 , 416 },
            { 0x100100 , 23 },
            { 0x100101 , 106 },
            { 0x100104 , 274 },
            { 0x100105 , 276 },
            { 0x100106 , 276 },
        };
    }
}

using Arrowgene.Ddon.Server;
using Arrowgene.Ddon.Server.Network;
using Arrowgene.Ddon.Shared.Entity.PacketStructure;
using Arrowgene.Ddon.Shared.Network;
using Arrowgene.Logging;
using Arrowgene.Ddon.Shared.Model;
using Arrowgene.Ddon.Shared.Entity;

namespace Arrowgene.Ddon.GameServer.Handler
{
    public class PawnGetMypawnDataHandler : StructurePacketHandler<GameClient, C2SPawnGetMypawnDataReq>
    {
        private static readonly ServerLogger Logger = LogProvider.Logger<ServerLogger>(typeof(PawnGetMypawnDataHandler));


        public PawnGetMypawnDataHandler(DdonGameServer server) : base(server)
        {
        }

        public override void Handle(GameClient client, StructurePacket<C2SPawnGetMypawnDataReq> req)
        {
                Pawn pawn = client.Character.PawnBySlotNo(req.Structure.SlotNo);


                S2CPawn_8_33_16Ntc pcap33 = EntitySerializer.Get<S2CPawn_8_33_16Ntc>().Read(new byte[] {0x0, 0x20, 0xB8, 0xF8, 0x0, 0xDB, 0x3B, 0xCF, 0x0, 0x20, 0xB8, 0xF8, 0x0, 0x5, 0x44, 0x69, 0x61, 0x6E, 0x61, 0x0, 0x6, 0x53, 0x65, 0x65, 0x6C, 0x69, 0x78, 0x0, 0x3, 0x53, 0x3B, 0x52, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0xB8, 0xC0, 0xC1});
                pcap33.CharacterId = client.Character.CharacterId;
                pcap33.PawnId = pawn.PawnId;
                pcap33.OwnerCharacterId = client.Character.CharacterId;
                pcap33.OwnerFirstName = client.Character.FirstName;
                pcap33.OwnerLastName = client.Character.LastName;
                // TODO: Etc
                client.Send(pcap33);

                S2CPawn_8_34_16Ntc pcap34 = EntitySerializer.Get<S2CPawn_8_34_16Ntc>().Read(new byte[] {0x0, 0x20, 0xB8, 0xF8, 0x0, 0xDB, 0x3B, 0xCF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x5, 0x44, 0x69, 0x61, 0x6E, 0x61, 0x0, 0x6, 0x53, 0x65});
                pcap34.CharacterId = client.Character.CharacterId;
                pcap34.PawnId = pawn.PawnId;
                // TODO: Etc
                client.Send(pcap34);

                S2CPawn_8_35_16Ntc pcap35 = EntitySerializer.Get<S2CPawn_8_35_16Ntc>().Read(new byte[] {0x0, 0x20, 0xB8, 0xF8, 0x0, 0xDB, 0x3B, 0xCF, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x24, 0x0, 0x0, 0x0, 0x3, 0x0, 0x0, 0x0, 0x0, 0x6C, 0x69, 0x78, 0x0, 0x3, 0x53, 0x3B, 0x52, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});
                pcap35.CharacterId = client.Character.CharacterId;
                pcap35.PawnId = pawn.PawnId;
                // TODO: Etc
                client.Send(pcap35);

                S2CPawn_8_36_16Ntc pcap36 = EntitySerializer.Get<S2CPawn_8_36_16Ntc>().Read(new byte[] {0x0, 0x20, 0xB8, 0xF8, 0x0, 0xDB, 0x3B, 0xCF, 0x0, 0x0, 0x0, 0x4, 0x1, 0x0, 0x0, 0x0, 0x0, 0x2, 0x0, 0x0, 0x0, 0x0, 0x3, 0x0, 0x0, 0x0, 0x0, 0x4, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xB, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x2, 0x0, 0x0, 0x0, 0x0, 0x0, 0x3, 0x0, 0x0, 0x0, 0x0, 0x0, 0x4, 0x0, 0x0, 0x0, 0x0, 0x0, 0x5, 0x0, 0x0, 0x0, 0x0, 0x0, 0x6, 0x0, 0x0, 0x0, 0x0, 0x0, 0x7, 0x0, 0x0, 0x0, 0x0, 0x0, 0x8, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0xA, 0x0, 0x0, 0x0, 0x0, 0x0, 0xB, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xB, 0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x2, 0x1, 0x0, 0x0, 0x0, 0x0, 0x3, 0x1, 0x0, 0x0, 0x0, 0x0, 0x4, 0x1, 0x0, 0x0, 0x0, 0x0, 0x5, 0x1, 0x0, 0x0, 0x0, 0x0, 0x6, 0x1, 0x0, 0x0, 0x0, 0x0, 0x7, 0x1, 0x0, 0x0, 0x0, 0x0, 0x8, 0x1, 0x0, 0x0, 0x0, 0x0, 0x9, 0x1, 0x0, 0x0, 0x0, 0x0, 0xA, 0x1, 0x0, 0x0, 0x0, 0x0, 0xB, 0x1, 0x0, 0x0, 0x0, 0x0, 0x16, 0x82, 0x74, 0x4C, 0x37, 0x97, 0x5D, 0xE9, 0x6, 0x16, 0xBC});
                pcap36.CharacterId = client.Character.CharacterId;
                pcap36.PawnId = pawn.PawnId;
                // TODO: Etc
                client.Send(pcap36);


                var res = new S2CPawnGetMypawnDataRes();
                res.PawnId = pawn.PawnId;
                GameStructure.CDataPawnInfo(res.PawnInfo, pawn);
                client.Send(res);
        }
    }
}

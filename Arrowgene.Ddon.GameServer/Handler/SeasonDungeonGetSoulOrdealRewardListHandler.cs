using Arrowgene.Ddon.GameServer.Characters;
using Arrowgene.Ddon.Server;
using Arrowgene.Ddon.Shared.Entity.PacketStructure;
using Arrowgene.Ddon.Shared.Network;
using Arrowgene.Logging;
using System.Collections.Generic;

namespace Arrowgene.Ddon.GameServer.Handler
{
    public class SeasonDungeonGetSoulOrdealRewardListHandler : GameRequestPacketHandler<C2SSeasonDungeonGetSoulOrdealRewardListReq, S2CSeasonDungeonGetSoulOrdealRewardListRes>
    {
        private static readonly ServerLogger Logger = LogProvider.Logger<ServerLogger>(typeof(SeasonDungeonGetSoulOrdealRewardListHandler));

        public SeasonDungeonGetSoulOrdealRewardListHandler(DdonGameServer server) : base(server)
        {
        }

        public override S2CSeasonDungeonGetSoulOrdealRewardListRes Handle(GameClient client, C2SSeasonDungeonGetSoulOrdealRewardListReq request)
        {
            // var result = new S2CSeasonDungeonGetSoulOrdealRewardListRes.Serializer().Read(pcap_data);

            var rewards = Server.EpitaphRoadManager.GetRewards(client, request.LayoutId.AsStageLayoutId(), request.PosId);
            return new S2CSeasonDungeonGetSoulOrdealRewardListRes()
            {
                BuffRewards = rewards.BuffRewards,
                ItemRewards = rewards.ItemRewards
            };
        }

        private readonly byte[] pcap_data = new byte[] { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x48, 0xE3, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x49, 0x36, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x53, 0x8E, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0x00, 0x00, 0x00, 0x25, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x1A, 0xE6, 0xB0, 0x97, 0xE7, 0xB5, 0xB6, 0xE6, 0x94, 0xBB, 0xE5, 0x8A, 0x9B, 0xE3, 0x82, 0xA2, 0xE3, 0x83, 0x83, 0xE3, 0x83, 0x97, 0x2B, 0x4C, 0x76, 0x2E, 0x31, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x59, 0x00, 0x00, 0x00, 0x36, 0x00, 0x2A, 0xE7, 0x8A, 0xB6, 0xE6, 0x85, 0x8B, 0xE7, 0x95, 0xB0, 0xE5, 0xB8, 0xB8, 0xE4, 0xBB, 0x98, 0xE4, 0xB8, 0x8E, 0xE3, 0x80, 0x90, 0xE6, 0xB0, 0xB7, 0xE9, 0x98, 0xB2, 0xE4, 0xBD, 0x8E, 0xE4, 0xB8, 0x8B, 0xE3, 0x80, 0x91, 0x4C, 0x76, 0x2E, 0x4D, 0x61, 0x78, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 0x11, 0x00, 0x00, 0x00, 0x05, 0x00, 0x1D, 0xE7, 0x89, 0xA9, 0xE7, 0x90, 0x86, 0xE9, 0x98, 0xB2, 0xE5, 0xBE, 0xA1, 0xE5, 0x8A, 0x9B, 0xE3, 0x82, 0xA2, 0xE3, 0x83, 0x83, 0xE3, 0x83, 0x97, 0x2B, 0x4C, 0x76, 0x2E, 0x31, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x46, 0x00, 0x00, 0x00, 0x23, 0x00, 0x24, 0xE7, 0x8A, 0xB6, 0xE6, 0x85, 0x8B, 0xE7, 0x95, 0xB0, 0xE5, 0xB8, 0xB8, 0xE8, 0x80, 0x90, 0xE6, 0x80, 0xA7, 0xE3, 0x80, 0x90, 0xE9, 0x81, 0x85, 0xE5, 0xBB, 0xB6, 0xE3, 0x80, 0x91, 0x4C, 0x76, 0x2E, 0x4D, 0x61, 0x78, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 0x83, 0x00, 0x00, 0x00, 0x42, 0x00, 0x23, 0xE8, 0xA9, 0xA6, 0xE7, 0xB7, 0xB4, 0xE3, 0x82, 0xAF, 0xE3, 0x83, 0xAA, 0xE3, 0x82, 0xA2, 0xE3, 0x81, 0xAE, 0xE5, 0xA0, 0xB1, 0xE9, 0x85, 0xAC, 0xE5, 0xA2, 0x97, 0xE5, 0x8A, 0xA0, 0x2B, 0x4C, 0x76, 0x2E, 0x31, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };
    }
}
